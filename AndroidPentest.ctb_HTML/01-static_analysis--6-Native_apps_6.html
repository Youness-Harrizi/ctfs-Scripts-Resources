<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>6-Native apps</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles4.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>6-Native apps</h1><br/><p>Here’s the “Reversing Hybrid Apps” course distilled into plain, practical text you can use on engagements.</p><p><ol><li>1) <h1>1) Overview (what you’re reversing)</h1></li><li>Android app types: native (Java/Kotlin), web (HTML/JS/CSS in browser), and <strong>hybrid</strong> (web code rendered in a native wrapper via WebView). The course focuses on <strong>React Native</strong> hybrids that ship a bundled JavaScript file. </li></ol></p><p><ul><li>React Native bundles app logic in <code>assets/index.android.bundle</code>. Depending on build, it’s either minified JavaScript or <strong>Hermes bytecode</strong> (compiled JS for the Hermes VM). </li></ul></p><p></p><p></p><p><ol><li>2) <h1>2) Tooling (install &amp; why)</h1></li><li><strong>jadx-gui</strong>: Triaging the APK structure/classes; locate <code>assets/index.android.bundle</code>. </li></ol></p><p><ul><li><strong>apktool</strong>: Unpack the APK to access assets cleanly. </li></ul></p><p><ul><li><strong>js-beautify</strong> (Node): Reformat minified JS bundles into readable code. Install Node + <code>js-beautify</code>.  </li></ul></p><p><ul><li><strong>hermes-dec</strong> (Python): Disassemble <strong>Hermes</strong> bytecode bundles into JS-like output. </li></ul></p><p></p><p></p><p><ol><li>3) <h1>3) Workflow A — Minified React Native bundle</h1></li><li><strong>Unpack</strong> the APK:</li></ol></p><p> <code>apktool d myapp.apk</code> </p><p><ol><li><strong>Beautify</strong> the bundle:</li></ol></p><p> <code>js-beautify myapp/assets/index.android.bundle -o beautified_index.android.bundle.js</code> </p><p><ol><li><strong>Hunt logic near the end</strong> of the beautified file (dev code is commonly there). Look for network flows, secrets, and auth: request to <code>http://10.10.10.10/login</code>, form headers, and a debug key surfaced in logs.  </li></ol></p><p><ol><li><strong>Exploit the finding</strong>: once you spot a hardcoded “debug” credential, reproduce with <code>curl</code> to validate. Example shows a POST with <strong>query param</strong> <code>debug_key</code> (not form-data) returning success JSON.</li></ol></p><p> <code>curl -X POST &#39;http://10.10.10.10/login?debug_key=tempDebuggingPassword&#39;</code> → <code>{ &quot;message&quot;: &quot;Logged in using debug key!&quot;, &quot;status&quot;: &quot;success&quot; }</code> </p><p></p><p><ol><li><h1>Workflow B — Hermes-enabled builds</h1></li><li><strong>Identify Hermes</strong>: <code>index.android.bundle</code> reports like <code>Hermes JavaScript bytecode, version 94</code>. If you open it with JADX/APKTool as text, it won’t render. </li></ol></p><p><ol><li><strong>Disassemble</strong> with hermes-dec:</li></ol></p><p><code>pip3 install --upgrade git+https://github.com/P1sec/hermes-dec</code><code></code></p><p><code>hbc-decompiler index.android.bundle output.js</code><code></code></p><p><code></code>Output confirms decompilation to <code>output.js</code>. </p><p><ol><li><strong>Read the recovered JS</strong>: as above, scroll near the end; locate network/auth code and any <strong>debug keys</strong> or alternate auth flows (e.g., <code>debug_key: tempDebuggingPassword</code>). </li></ol></p><p><ol><li><strong>Validate via HTTP</strong> exactly like in Workflow A. </li></ol></p><p></p><p><ol><li>5) <h1>5) What to look for (fast triage pointers)</h1></li><li><strong>Auth flows</strong>: <code>fetch</code>/XHR to internal IPs, <code>/login</code> endpoints, unusual headers, tokens in query strings. </li><li><strong>Debug artifacts</strong>: strings like <code>debug</code>, <code>temp</code>, <code>key</code>, “Successful/Failed” logs that hint at bypasses. </li><li><strong>Config flags</strong>: <code>hermesEnabled</code> in Android build settings indicates compiled JS (harder to read until decompiled). </li></ol></p><p></p><p></p><p><ol><li><h1>Reporting-ready evidence</h1></li><li>Show the <strong>code excerpt</strong> (sanitized) that reveals the credential or bypass (e.g., console log with <code>temp_debugging_key</code>). </li></ol></p><p><ul><li>Record the <strong>reproduction request/response</strong> (exact URL, method, parameters, and returned JSON). </li></ul></p><p></p><p></p><p><ol><li>7) <h1>7) Quick command recap (copy/paste)</h1></li></ol></p><p><code># Unpack APK</code><code></code></p><p><code>apktool d myapp.apk                                   # :contentReference[oaicite:21]{index=21}</code><code></code></p><p><code></code><code></code></p><p><code># (Minified JS) Beautify bundle</code><code></code></p><p><code>js-beautify myapp/assets/index.android.bundle \</code><code></code></p><p><code>  -o beautified_index.android.bundle.js               # :contentReference[oaicite:22]{index=22}</code><code></code></p><p><code></code><code></code></p><p><code># (Hermes) Decompile bundle</code><code></code></p><p><code>pip3 install --upgrade git+https://github.com/P1sec/hermes-dec  # :contentReference[oaicite:23]{index=23}</code><code></code></p><p><code>hbc-decompiler index.android.bundle output.js                  # :contentReference[oaicite:24]{index=24}</code><code></code></p><p><code></code><code></code></p><p><code># Validate discovered debug auth</code><code></code></p><p><code>curl -X POST &#39;http://10.10.10.10/login?debug_key=tempDebuggingPassword&#39;  # :contentReference[oaicite:25]{index=25}</code><code></code></p><p><code></code><ol><li>8) <h1>8) Takeaways for pentesters/red teamers</h1></li><li>Treat <code>index.android.bundle</code> as the <strong>single source of truth</strong> for business logic in React Native apps (beautify or decompile first). </li></ol></p><p><ul><li><strong>Minified ≠ secure</strong>: Beautifiers surface hardcoded keys/URLs quickly. </li></ul></p><p><ul><li><strong>Hermes isn’t opaque</strong>: hermes-dec restores readable JS; you can still trace flows and secrets. </li></ul></p><p></p><p></p><p>If you want, I can turn this into a one-page checklist (APK → unpack → JS path A/B → findings → PoC) or add Frida hooks to live-inspect React Native network calls.</p></div>
</body>
</html>
