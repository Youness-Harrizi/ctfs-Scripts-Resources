<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>SMB</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles4.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>SMB</h1><br/><p><h2>Enumerate</h2></p><p><div class="codebox"><pre><span style="color:#0088ff;font-weight:400"># identify netbios info </span><br /><span style="color:#ff9d00;font-weight:700">sudo</span> nbtscan -r 192.168.50.0/24<br /><span style="color:#0088ff;font-weight:400">#  smb discovery </span><br />nmap -v -p 139,445 --script smb-os-discovery <span style="color:#7f0044;font-weight:400">$target</span><br /><span style="color:#0088ff;font-weight:400"># list shares in windows</span><br />net view <span style="color:#333333;font-weight:400">\\</span>dc01 /all<br /><span style="color:#0088ff;font-weight:400"># mount samba shares </span><br /><span style="color:#ff9d00;font-weight:700">mount</span> -t cifs -o <span style="color:#3ad900;font-weight:400">&#39;username=admin&#39;</span> //10.10.10.159/share /mnt/<br /><br /><span style="color:#0088ff;font-weight:400">## SMBCLIENT</span><br />smbclient.py <span style="color:#3ad900;font-weight:400">&#39;htb.local/bob:Passw0rd1!@192.168.3.203&#39;</span> <br />smbclient  //<span style="color:#7f0044;font-weight:400">$target</span>/<span style="color:#7f0044;font-weight:400">$share</span> -U <span style="color:#3ad900;font-weight:400">&#39;&#39;</span><br /><br /><span style="color:#0088ff;font-weight:400">## bruteforce users </span><br />crackmapexec smb <span style="color:#7f0044;font-weight:400">$target</span> -u mark -p <span style="color:#3ad900;font-weight:400">&#39;OathDeeplyReprieve91&#39;</span> --rid-brute<br /></pre></div><ul><li>ls /usr/share/nmap/scripts/smb-*</li></ul></p><p></p><p></p><p><h2>EXploit</h2></p><p></p><p><div class="codebox"><pre><span style="color:#0088ff;font-weight:400"># eternal blue : ms17-010</span><br /><br /><span style="color:#0088ff;font-weight:400"># MS08-067 RCE </span><br />https:<span style="color:#ff9d00;font-weight:700">//</span>www.getastra.com<span style="color:#ff9d00;font-weight:700">/</span>blog<span style="color:#ff9d00;font-weight:700">/</span>security-audit<span style="color:#ff9d00;font-weight:700">/</span>how-to-hack-windows-xp-using-metasploit-kali-linux-ms08067<span style="color:#ff9d00;font-weight:700">/</span><br /><br /><span style="color:#0088ff;font-weight:400">## Samba smbd 3.X - 4.X</span><br /><br /><span style="color:#0088ff;font-weight:400">## samba symlink traversal</span><br />smba <span style="color:#ff9d00;font-weight:700">&lt;3</span>.5.4</pre></div><h3></h3></p><p><h3> </h3></p><p><h2>Default shares</h2></p><p><ol><li>ipc$: <ol><li>DEFAULT for anonymous users</li></ol></li><li>print$<ol><li>Printer sharing is <strong>the process of allowing multiple computers and devices connected to the same network to access one or more printers</strong></p><p></li></ol></li></ol></p></div>
</body>
</html>
